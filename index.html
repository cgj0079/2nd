<!DOCTYPE html>
<html lang="ko">
  
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>삼육GO!</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6;
    }

    .fade-in {
      animation: fadeIn 1.2s ease-in-out both;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-in {
      animation: slideIn 0.6s ease-out forwards;
    }

    @keyframes slideIn {
      from {
        transform: translateX(-20px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .hidden {
      display: none;
    }

    .search-bar {
      width: 100%;
      max-width: 500px;
      padding: 10px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
      margin-bottom: 1.5rem;
      box-sizing: border-box;
    }

    .table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      overflow-x: auto;
      display: block;
    }

    .table th,
    .table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e2e8f0;
      word-break: keep-all;
    }

    .table th {
      background: #edf2ff;
      color: #1e40af;
      font-weight: 600;
    }

    .table button {
      padding: 8px 18px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.97rem;
      font-weight: 500;
      transition: background 0.18s, box-shadow 0.18s, transform 0.13s;
      box-shadow: 0 1px 4px rgba(30, 64, 175, 0.07);
    }

    .btn-available {
      background: linear-gradient(90deg, #2563eb 0%, #1e40af 100%);
      color: #fff;
    }

    .btn-available:hover {
      background: linear-gradient(90deg, #1e40af 0%, #2563eb 100%);
      transform: translateY(-2px) scale(1.04);
      box-shadow: 0 2px 8px rgba(30, 64, 175, 0.13);
    }

    .btn-unavailable {
      background: #e5e7eb;
      color: #4b5563;
      cursor: not-allowed;
      opacity: 0.7;
    }

    .info-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: #e5e7eb;
      color: #374151;
      font-size: 12px;
      margin-left: 6px;
      border: none;
      cursor: pointer;
    }
    .info-btn:hover { background: #d1d5db; }

    .nav-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      z-index: 50;
      background: rgba(255, 255, 255, 0.97);
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 1rem;
      box-shadow: 0 2px 8px rgba(30, 64, 175, 0.04);
    }

    .nav-links {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .nav-link {
      display: flex;
      align-items: center;
      padding: 0.5rem 0.9rem;
      border-radius: 0.5rem;
      background: #f1f5ff;
      color: #1e40af;
      font-weight: 500;
      font-size: 1rem;
      text-decoration: none;
      transition: background 0.18s, color 0.18s, transform 0.18s;
    }

    .nav-link.active,
    .nav-link:hover {
      background: #1e40af;
      color: #fff;
      transform: translateY(-2px) scale(1.04);
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .nav-logo img {
      height: 2.2rem;
      border-radius: 0.4rem;
    }

    .nav-logo span {
      font-size: 1.08em;
      font-weight: 600;
      color: #1e40af;
      letter-spacing: 1px;
      white-space: nowrap;
    }

    section {
      scroll-margin-top: 8rem;
      background-color: transparent;
    }

    .main-content {
      margin-top: 8rem;
    }

    @media (max-width: 1024px) {
      .main-content {
        padding: 1rem !important;
      }

      .max-w-4xl {
        max-width: 100vw;
      }
      .nav-links {
        width: 100%;
        justify-content: center;
        display: grid;
        grid-template-columns: repeat(3, max-content);
        column-gap: 0.5rem;
        row-gap: 0.4rem;
      }
      .nav-link {
        justify-content: center;
        flex: initial;
        width: auto;
      }
    }

    @media (max-width: 768px) {
      .nav-links {
        gap: 0.2rem;
        width: 100%;
        justify-content: center;
        display: grid;
        grid-template-columns: repeat(3, max-content);
        column-gap: 0.4rem;
        row-gap: 0.35rem;
      }

      .nav-link {
        font-size: 0.98rem;
        padding: 0.45rem 0.7rem;
        justify-content: center;
        flex: initial;
        width: auto;
      }

      .nav-logo span {
        font-size: 0.98em;
      }

      section {
        scroll-margin-top: 7rem;
      }

      .main-content {
        margin-top: 7rem;
      }

      .table th,
      .table td {
        padding: 8px;
        font-size: 0.97em;
      }
    }

    .nav-bar,
    .nav-links,
    .nav-link,
    .nav-logo,
    .nav-logo span {
      user-select: none;
    }

    @media (max-width: 480px) {
      .nav-logo img {
        height: 1.6rem;
      }

      .nav-logo span {
        font-size: 0.92em;
      }

      .nav-bar {
        padding: 0.3rem 0.3rem;
      }

      .nav-link {
        font-size: 0.93rem;
        padding: 0.35rem 0.5rem;
      }

      .main-content {
        margin-top: 6rem;
        padding: 0.5rem !important;
      }

      section {
        scroll-margin-top: 6rem;
      }

      .table th,
      .table td {
        padding: 6px;
        font-size: 0.93em;
      }

      .search-bar {
        font-size: 0.95em;
        padding: 8px;
      }
    }

    .card,
    .table,
    form,
    .content-box {
      background-color: white;
      /* 컨텐츠는 흰색 카드로 */
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
    }

    /* 모바일에서 테이블 가로 스크롤 */
    @media (max-width: 600px) {
      .table {
        font-size: 0.93em;
        min-width: 400px;
      }

      .max-w-4xl {
        max-width: 100vw;
      }
    }

    html.modal-open,
    body.modal-open {
      overflow: hidden !important;
      height: 100%;
    }

    #rental-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #rental-modal.open { display: flex; }

    /* 모달 등장 애니메이션 */
    @keyframes modalIn {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.96); }
      100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    #rental-modal.open .modal-inner {
      animation: modalIn 220ms ease-out forwards;
    }


    #rental-modal .modal-inner {
      background: #fff;
      max-width: 420px;
      width: 95vw;
      border-radius: 1rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.18);
      padding: 2.2rem 2rem 2rem 2rem;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      flex-direction: column;
      min-width: 320px;
      max-height: none;
      overflow: visible;
    }

    @media (max-width: 480px) {
      #rental-modal .modal-inner {
        padding: 1.2rem 0.5rem 1.2rem 0.5rem;
        min-width: 0;
        max-width: 98vw;
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 via-white to-blue-100 text-gray-800">
  <!-- 가로 네비게이션 바 -->
  <nav class="nav-bar fade-in">
    <div class="nav-logo">
      <img class="nav-home" src="logo.webp" alt="학교 로고" />
      <span class="nav-home" style="user-select:none;">서울삼육고등학교</span>
    </div>
    <div class="nav-links">
      <a href="#home" class="nav-link active">🏠 홈</a>
      <a href="#papers" class="nav-link">📄 논문 열람</a>
      <a href="#lectures" class="nav-link">🎓 온라인 강의</a>
      <a href="#rentals" class="nav-link">📦 물품 대여</a>
      <a href="#schedule" class="nav-link">🗓️ 학사 일정</a>
      <a href="#contact" class="nav-link">💬 문의 / 건의</a>
    </div>
  </nav>

  <!-- 메인 콘텐츠 -->
  <main class="main-content fade-in p-4 md:p-10 overflow-y-auto">
    <div class="max-w-4xl mx-auto">
      <section id="home">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">환영합니다 👋</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">
          이 사이트에서는 <strong>논문 열람</strong>, <strong>온라인 강의 수강</strong>, <strong>학교 물품 대여</strong> 뿐만 아니라 <strong>학사 일정
            확인</strong>과 <strong>문의 / 건의</strong>도 할 수 있어요.
        </p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div style="cursor:pointer;"
            class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 home-link"
            data-target="papers">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">논문 열람</h3>
            <p class="text-sm text-gray-500">학교 연구논문을 검색하고 바로 열람할 수 있어요.</p>
          </div>
          <div style="cursor:pointer;"
            class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 home-link"
            data-target="lectures">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">온라인 강의</h3>
            <p class="text-sm text-gray-500">언제 어디서나 수업을 듣고 복습할 수 있어요.</p>
          </div>
          <div style="cursor:pointer;"
            class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 home-link"
            data-target="rentals">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">물품 대여</h3>
            <p class="text-sm text-gray-500">교내 기자재를 손쉽게 대여하고 관리할 수 있어요.</p>
          </div>
          <a href="https://forms.gle/uaEurN7Hx2eUx9o57" target="_blank" rel="noopener"
             class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300"
             style="text-decoration:none;">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">논문/강의 제출</h3>
            <p class="text-sm text-gray-500">논문이나 강의 영상을 제출받는 구글 폼으로 이동합니다.</p>
          </a>
        </div>
      </section>
      <section id="papers" class="hidden">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">논문 열람</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">원하는 논문을 빠르게 찾아 열람하세요.</p>
        <input type="text" class="search-bar" id="paper-search" placeholder="논문 제목 또는 키워드를 입력하세요" autocomplete="off">
        <div id="paper-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- 논문 카드가 여기에 표시됩니다 -->
          <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">딥러닝(학습 방법 및 세부 내용)</h3>
            <p class="text-sm text-gray-500 mb-4">저자: 최국준 | 발행일: 2024-12-03</p>
            <button class="btn-available" data-paper-url="https://docs.google.com/document/d/1uRX14w6okfR6O8AydWyELWCo3BIhhDcInFdmQbHsjvs/edit?tab=t.0#heading=h.9k2tf69rmoq9">열람하기</button>
          </div>
          <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">도파민 터지는 세상에서 왜 나는 우울한가</h3>
            <p class="text-sm text-gray-500 mb-4">저자: 장래혁 | 발행일: 2024-01</p>
            <button class="btn-available" data-paper-url="https://www.dbpia.co.kr/pdf/pdfView.do?nodeId=NODE11700923">열람하기</button>
          </div>
          <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">썸타기와 어장관리에 대한 철학적 고찰</h3>
            <p class="text-sm text-gray-500 mb-4">저자: 최성호 | 발행일: 2020-11</p>
            <button class="btn-available" data-paper-url="https://www.dbpia.co.kr/pdf/pdfView.do?nodeId=NODE10502917">열람하기</button>
          </div>

        </div>
      </section>
      <section id="lectures" class="hidden">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">온라인 강의</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">다양한 강의를 수강하여 지식을 넓히세요.</p>
        <input type="text" class="search-bar" id="lecture-search" placeholder="강의 제목 또는 키워드를 입력하세요" autocomplete="off">
        <div id="lecture-player" class="mt-6 hidden fade-in">
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-semibold">강의 영상</h3>
            <button id="lecture-close" class="text-sm text-gray-500 hover:text-gray-700">닫기</button>
          </div>
          <div id="video-container" class="aspect-w-16 aspect-h-9 bg-black rounded"></div>
        </div>
        <div id="lecture-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">이차함수 이해하기(EBSi)</h3>
            <p class="text-sm text-gray-500 mb-4">강사: 정승재 | 기간: 2023-06-07</p>
            <button class="btn-available lecture-play" data-video="https://www.youtube.com/watch?v=LLWucAoYLRY">바로 재생</button>
          </div>
          <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
            <h3 class="text-xl font-semibold mb-2 text-blue-700">데이터 분석 기초 개념</h3>
            <p class="text-sm text-gray-500 mb-4">강사: 곽팀장 | 2023-01-09</p>
            <button class="btn-available lecture-play" data-video="https://www.youtube.com/watch?v=7YQOi7gUKEo">바로 재생</button>
          </div>
        </div>
        <div id="lecture-empty" class="hidden text-gray-500 mt-4">검색 결과가 없습니다.</div>

        
      </section>
      <section id="rentals" class="hidden">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">물품 대여</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">필요한 교내 기자재를 손쉽게 대여하세요.</p>
        <table class="table">
          <thead>
            <tr>
              <th>용품명</th>
              <th>상태</th>
              <th>대여 가능일</th>
              <th>가능 여부</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>노트북 1</td>
              <td>대여 가능</td>
              <td>즉시</td>
              <td><button class="btn-available rental-btn" data-item="노트북">대여하기</button></td>
            </tr>
            <tr>
              <td>노트북 2</td>
              <td>대여 가능</td>
              <td>즉시</td>
              <td><button class="btn-available rental-btn" data-item="노트북">대여하기</button></td>
            </tr>
            <tr>
              <td>노트북 3</td>
              <td>대여 가능</td>
              <td>즉시</td>
              <td><button class="btn-available rental-btn" data-item="노트북">대여하기</button></td>
            </tr>
            <tr>
              <td>노트북 4</td>
              <td>대여 가능</td>
              <td>즉시</td>
              <td><button class="btn-available rental-btn" data-item="노트북">대여하기</button></td>
            </tr>
            <tr>
              <td>프로젝터</td>
              <td>대여 중</td>
              <td>2025-08-26</td>
              <td><button class="btn-unavailable" disabled>대여하기</button></td>
            </tr>
          </tbody>
        </table>
      </section>
      <div id="rental-modal" class="hidden">
        <div class="modal-inner">
          <button id="rental-modal-close"
            style="position:absolute; top:12px; right:18px; font-size:1.3rem; color:#888; background:none; border:none; cursor:pointer; z-index:2;">×</button>
          <h3 class="text-xl font-bold mb-3 text-blue-800" id="rental-modal-title" style="text-align:center;">물품 대여 신청
          </h3>
          <form id="rental-form" autocomplete="off">
            <label class="block mb-2 font-semibold text-blue-900">대여 기간(최대 3일)
              <input type="number" min="1" max="3" name="period" class="search-bar" required placeholder="1~3일 입력"
                style="margin-bottom:0;">
            </label>
            <label class="block mb-2 font-semibold text-blue-900">학번
              <input type="text" name="studentId" class="search-bar" required maxlength="10" pattern="[0-9]+"
                placeholder="학번 입력" style="margin-bottom:0;">
            </label>
            <label class="block mb-2 font-semibold text-blue-900">전화번호
              <div style="display:flex; align-items:center; gap:6px;">
                <input type="tel" name="phone" class="search-bar" required maxlength="13" pattern="[0-9\-]+"
                  placeholder="010-0000-0000" style="margin-bottom:0; flex:1;">
                <button type="button" id="phone-info" class="info-btn" aria-label="전화번호가 필요한 이유">?</button>
              </div>
            </label>
            <button type="submit" class="btn-available mt-2 w-full">신청하기</button>
            <div id="rental-success"
              style="display:none; color:#2563eb; margin-top:1rem; font-weight:600; text-align:center;">
              대여 신청이 완료되었습니다!
            </div>
          </form>
        </div>
      </div>
      <section id="schedule" class="hidden">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">학사 일정</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">중요한 학사 일정을 확인하세요.</p>
        <table class="table" id="schedule-table">
          <thead>
            <tr>
              <th>일정</th>
              <th>날짜</th>
              <th>설명</th>
              <th>D-Day</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>중간고사</td>
              <td data-date="2025-09-24">2025-09-24</td>
              <td>2학기 중간고사</td>
              <td class="dday"></td>
            </tr>
            <tr>
              <td>기말고사</td>
              <td data-date="2025-12-08">2025-12-08</td>
              <td>2학기 기말고사</td>
              <td class="dday"></td>
            </tr>
            <tr>
              <td>졸업식</td>
              <td data-date="2026-01-06">2026-01-06</td>
              <td>3학년 졸업 행사</td>
              <td class="dday"></td>
            </tr>
            <tr>
              <td>종업식(방학식)</td>
              <td data-date="2026-01-07">2026-01-07</td>
              <td>2학기 종료 및 겨울방학 시작</td>
              <td class="dday"></td>
            </tr>
          </tbody>
        </table>
      </section>
      <section id="contact" class="hidden">
        <h2 class="text-4xl font-bold mb-4 text-blue-800 tracking-tight">문의 / 건의</h2>
        <p class="text-lg text-gray-600 leading-relaxed mb-8">궁금한 점이나 건의사항을 남겨주세요.</p>
        <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300">
          <form action="https://formspree.io/f/xyzpnjvl" method="POST" id="contact-form2" autocomplete="off">
            <label class="block mb-2 font-semibold text-blue-900">이름
              <input type="text" name="name" class="search-bar" required autocomplete="off" autocapitalize="off"
                spellcheck="false">
            </label>
            <input type="hidden" name="email" value="seoulsahmyook63@gmail.com">
            <label for="contact-message" class="block mb-1 font-semibold text-blue-900" style="margin-left:2px;">문의
              내용</label>
            <div class="mb-2">
              <textarea id="contact-message" name="message" class="search-bar pr-28" rows="4" required
                autocomplete="off" autocapitalize="off" spellcheck="false"></textarea>
            </div>
            <button type="submit" class="btn-available mt-2">보내기</button>
            <div id="contact-success2" style="display:none; color:#2563eb; margin-top:1rem; font-weight:600;">
              문의가 성공적으로 제출되었습니다!
            </div>
          </form>
        </div>
      </section>
    </div>
  </main>

  <script>
    document.querySelector('.nav-home').addEventListener('click', function () {
      showSection('home');
    });

    function showSection(sectionId) {
      document.querySelectorAll('main section').forEach(section => {
        section.classList.add('hidden');
      });
      document.getElementById(sectionId).classList.remove('hidden');
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.add('active');
      // 섹션 전환 시 카드 슬라이드 애니메이션
      if (sectionId === 'lectures') {
        document.querySelectorAll('#lecture-list > div').forEach(card => {
          card.classList.remove('slide-in');
          void card.offsetWidth;
          card.classList.add('slide-in');
        });
      } else if (sectionId === 'papers') {
        document.querySelectorAll('#paper-list > div').forEach(card => {
          card.classList.remove('slide-in');
          void card.offsetWidth;
          card.classList.add('slide-in');
        });
      }
      // 제목이 최상단에 보이도록 섹션 컨테이너 스크롤을 최상단으로
      const main = document.querySelector('.main-content');
      if (main) main.scrollTo({ top: 0, behavior: 'smooth' });
    }
    showSection('home');

    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = e.currentTarget.getAttribute('href').substring(1);
        showSection(sectionId);
      });
    });

    document.querySelectorAll('.home-link').forEach(link => {
      link.addEventListener('click', function () {
        const target = link.getAttribute('data-target');
        showSection(target);
      });
    });

    document.getElementById('paper-search').addEventListener('input', function (e) {
      const keword = e.target.value.trim();
      document.querySelectorAll('#paper-list > div').forEach(card => {
        if (!keword || card.textContent.includes(keword)) {
          card.style.display = '';
        } else {
          card.style.display = 'none';
        }
      })
    });

    document.getElementById('lecture-search').addEventListener('input', function (e) {
      const keyword = e.target.value.trim().toLowerCase();
      let visibleCount = 0;
      document.querySelectorAll('#lecture-list > div').forEach(card => {
        const match = !keyword || card.textContent.toLowerCase().includes(keyword);
        card.style.display = match ? '' : 'none';
        if (match) visibleCount++;
      });
      document.getElementById('lecture-empty').classList.toggle('hidden', visibleCount !== 0);
    });

    document.getElementById('contact-form2').addEventListener('submit', function (e) {
      e.preventDefault();
      const form = e.target;
      fetch(form.action, {
        method: "POST",
        body: new FormData(form),
        headers: { 'Accept': 'application/json' }
      }).then(response => {
        if (response.ok) {
          document.getElementById('contact-success2').style.display = 'block';
          form.reset();
          setTimeout(() => {
            document.getElementById('contact-success2').style.display = 'none';
          }, 2500);
        } else {
          alert('전송에 실패했습니다. 다시 시도해주세요.');
        }
      }).catch(() => {
        alert('전송에 실패했습니다. 다시 시도해주세요.');
      });
    });

    // 논문/강의 제출 폼 토글
    const paperSubmitToggle = document.getElementById('paper-submit-toggle');
    const paperSubmitForm = document.getElementById('paper-submit-form');
    if (paperSubmitToggle && paperSubmitForm) {
      paperSubmitToggle.addEventListener('click', () => {
        const isHidden = paperSubmitForm.classList.contains('hidden');
        paperSubmitForm.classList.toggle('hidden');
        paperSubmitToggle.textContent = isHidden ? '제출 폼 닫기' : '제출 폼 열기';
      });
      paperSubmitForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const form = e.target;
        fetch(form.action, { method: 'POST', body: new FormData(form), headers: { 'Accept': 'application/json' } })
          .then(r => {
            if (r.ok) {
              document.getElementById('paper-submit-success').style.display = 'block';
              form.reset();
              setTimeout(() => { document.getElementById('paper-submit-success').style.display = 'none'; }, 2400);
            } else { alert('제출에 실패했습니다. 다시 시도해주세요.'); }
          }).catch(() => alert('제출에 실패했습니다. 다시 시도해주세요.'));
      });
    }

    const lectureSubmitToggle = document.getElementById('lecture-submit-toggle');
    const lectureSubmitForm = document.getElementById('lecture-submit-form');
    if (lectureSubmitToggle && lectureSubmitForm) {
      lectureSubmitToggle.addEventListener('click', () => {
        const isHidden = lectureSubmitForm.classList.contains('hidden');
        lectureSubmitForm.classList.toggle('hidden');
        lectureSubmitToggle.textContent = isHidden ? '제출 폼 닫기' : '제출 폼 열기';
      });
      lectureSubmitForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const form = e.target;
        fetch(form.action, { method: 'POST', body: new FormData(form), headers: { 'Accept': 'application/json' } })
          .then(r => {
            if (r.ok) {
              document.getElementById('lecture-submit-success').style.display = 'block';
              form.reset();
              setTimeout(() => { document.getElementById('lecture-submit-success').style.display = 'none'; }, 2400);
            } else { alert('제출에 실패했습니다. 다시 시도해주세요.'); }
          }).catch(() => alert('제출에 실패했습니다. 다시 시도해주세요.'));
      });
    }

    (function attachLecturePlayHandlers() {
      const lecturePlayer = document.getElementById('lecture-player');
      const videoContainer = document.getElementById('video-container');
      const closeBtn = document.getElementById('lecture-close');
      document.querySelectorAll('#lecture-list .lecture-play').forEach(btn => {
        btn.addEventListener('click', () => {
          const src = btn.dataset.video;
          let videoHTML = '';
          if (src.includes('youtube.com') || src.includes('youtu.be')) {
            const embedSrc = src.includes('watch?v=')
              ? src.replace('watch?v=', 'embed/')
              : (src.includes('youtu.be/')
                  ? src.replace('youtu.be/', 'www.youtube.com/embed/')
                  : src);
            videoHTML = `<iframe class=\"w-full h-96 rounded\" src=\"${embedSrc}\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen></iframe>`;
          } else {
            videoHTML = `<video class=\"w-full h-96 rounded\" controls>
                           <source src=\"${src}\" type=\"video/mp4\">
                           지원하지 않는 브라우저입니다.
                         </video>`;
          }
          videoContainer.innerHTML = videoHTML;
          lecturePlayer.classList.remove('hidden');
          lecturePlayer.classList.remove('fade-in');
          void lecturePlayer.offsetWidth;
          lecturePlayer.classList.add('fade-in');
        });
      });
      if (closeBtn) {
        closeBtn.addEventListener('click', () => {
          lecturePlayer.classList.add('hidden');
          videoContainer.innerHTML = '';
        });
      }
    })();
    // 논문 열람
    document.querySelectorAll('#paper-list [data-paper-url]').forEach(btn => {
      btn.addEventListener('click', () => {
        const url = btn.getAttribute('data-paper-url');
        window.open(url, 'paperPopup', 'width=900,height=600');
      });
    });

    // 강의 카드 버튼은 내부 플레이어로 재생

    document.querySelectorAll('.rental-btn').forEach(btn => {
      btn.addEventListener('click', function () {
        const modal = document.getElementById('rental-modal');
        modal.classList.remove('hidden');
        modal.classList.add('open');
        document.getElementById('rental-modal-title').textContent = `${btn.dataset.item} 대여 신청`;
        document.getElementById('rental-form').reset();
        document.getElementById('rental-success').style.display = 'none';
        document.documentElement.classList.add('modal-open');
        document.body.classList.add('modal-open');
      });
    });
    document.getElementById('rental-modal-close').onclick = function () {
      const modal = document.getElementById('rental-modal');
      modal.classList.add('hidden');
      modal.classList.remove('open');
      document.documentElement.classList.remove('modal-open');
      document.body.classList.remove('modal-open');
    };
    document.getElementById('rental-modal').onclick = function (e) {
      if (e.target === this) {
        this.classList.add('hidden');
        this.classList.remove('open');
        document.documentElement.classList.remove('modal-open');
        document.body.classList.remove('modal-open');
      }
    };
    document.getElementById('rental-form').addEventListener('submit', function (e) {
      e.preventDefault();
      // 실제 서버 전송 대신 성공 메시지 표시
      document.getElementById('rental-success').style.display = 'block';
      setTimeout(() => {
        const modal = document.getElementById('rental-modal');
        modal.classList.add('hidden');
        modal.classList.remove('open');
        document.getElementById('rental-success').style.display = 'none';
        document.documentElement.classList.remove('modal-open');
        document.body.classList.remove('modal-open');
      }, 1800);
    });
    // 초기 로드시 모달이 보이지 않도록 보장
    window.addEventListener("load", () => {
      const modal = document.getElementById('rental-modal');
      modal.classList.add('hidden');
      modal.classList.remove('open');
      document.documentElement.classList.remove('modal-open');
      document.body.classList.remove('modal-open');
    });

    // 전화번호 안내 버튼
    const phoneInfoBtn = document.getElementById('phone-info');
    if (phoneInfoBtn) {
      phoneInfoBtn.addEventListener('click', () => {
        alert('전화번호는 미반납 또는 물품 손상 시 연락을 위해 필요합니다. 정확한 연락처를 입력해 주세요.');
      });
    }

    function updateDDay() {
      const today = new Date();
      document.querySelectorAll('#schedule-table tbody tr').forEach(row => {
        const dateStr = row.querySelector('td[data-date]').getAttribute('data-date');
        const targetDate = new Date(dateStr + 'T00:00:00');
        const diff = Math.ceil((targetDate - today) / (1000 * 60 * 60 * 24));
        let ddayText = '';
        if (diff > 0) ddayText = `D-${diff}`;
        else if (diff === 0) ddayText = 'D-Day';
        else ddayText = `D+${Math.abs(diff)}`;
        row.querySelector('.dday').textContent = ddayText;
      });
    }
    updateDDay();
  </script>
</body>

</html>

